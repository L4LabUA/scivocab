{% extends "base.html" %}

{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>

<script type=text/javascript>
    var word_index = 0;
    // Global- rephrase as capital
    $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    function update(data) {
        if ("redirect" in data) {
            window.location.href=data["redirect"];
        }
        $("img#img_p1").attr('src' , $SCRIPT_ROOT+"/static/"+data.filenames[0]) ;
        $("img#img_p2").attr('src' , $SCRIPT_ROOT+"/static/"+data.filenames[1]) ;
        $("img#img_p3").attr('src' , $SCRIPT_ROOT+"/static/"+data.filenames[2]) ;
        $("img#img_p4").attr('src' , $SCRIPT_ROOT+"/static/"+data.filenames[3]) ;
        $("h1#header").text(data.tw) ;
        word_index++;
    }


    // When the page loads up for the first time (or is refreshed), the
    // function registered in the callback below initializes the task with the
    // first word in the sequence.
    $(function() {
        $.getJSON("selectImage",
            {},
            update
        );
        return false;
    });

    // The block of code below registers the 'update' function to be called
    // every time an image is clicked.

    $(document).on('click', 'img', function() {
        $.getJSON(
            "selectImage",
            {position: $(this).attr('id'), word_index : word_index},
            update
        );
        return false;
    });

</script>
<style>
    img {width: 100%; height: auto}
    body {margin: auto}
</style>
<title>L4 Breadth-First</title>
<div class="container-fluid" style="text-align: center">
    <h1>Scientific Vocabulary Task</h1>
    <h1 id="header">{{ current_word.tw }}</h1>
    <table>
        <tr>
            <td>
                <a href= "#" id="p1">
                    <img id = "img_p1" src="" />
                </a>
            </td>
            <td>
                <a href= "#" id="p2">
                    <img id = "img_p2" src="" />
                </a>
            </td>
        </tr>
        <tr>
            <td>
                <a href= "#" id="p3">
                    <img id = "img_p3" src="" />
                </a>
            </td>
            <td>
                <a href= "#" id="p4">
                    <img id = "img_p4" src="" />
                </a>
            </td>
        </tr>

    </table>
</div>
{% endblock %}
